"use strict";

(function () {
  var body = document.querySelector('body');
  var navigation = document.querySelector('.nav');
  var navigationBtn = document.querySelector('.btn-menu');
  initMobileMenu();
  initBtnTop();
  initAnchorNav();
  headerStickyInit();
  /**
   * Show navigation menu on mobile
   */

  function initMobileMenu() {
    navigationBtn.addEventListener('click', function () {
      body.classList.toggle('body--overflow');
      navigation.classList.toggle('nav--opened');
      navigationBtn.classList.toggle('btn-menu--close');
    });
  }
  /**
   * Anchor link navigation
   */


  function initAnchorNav() {
    var navLinks = document.querySelectorAll('.nav__link');
    var v = 0.3;
    var t;
    var start;
    [].forEach.call(navLinks, function (link) {
      link.addEventListener('click', function (e) {
        e.preventDefault();

        for (var i = 0; i < navLinks.length; i++) {
          navLinks[i].classList.remove('nav__link--active');
          this.classList.add('nav__link--active');
        }

        if (navigation.classList.contains('nav--opened')) {
          body.classList.remove('body--overflow');
          navigation.classList.remove('nav--opened');
          navigationBtn.classList.remove('btn-menu--close');
        }

        var w = window.pageYOffset;
        var hash = this.href.replace(/[^#]*(.*)/, '$1');
        t = document.querySelector(hash).getBoundingClientRect().top, start = null;
        requestAnimationFrame(step);

        function step(time) {
          if (start === null) {
            start = time;
          }

          var progress = time - start;
          var r = t < 0 ? Math.max(w - progress / v, w + t) : Math.min(w + progress / v, w + t);
          window.scrollTo(0, r);

          if (r != w + t) {
            requestAnimationFrame(step);
          } else {
            location.hash = hash;
          }
        }
      }, false);
    });
  }
  /**
   * Scroll top btn
   */


  function initBtnTop() {
    var btnScrollTop = document.querySelector('.scroll-top');
    var scrolled;
    var timer;
    window.addEventListener('scroll', function (e) {
      if (window.pageYOffset > '700') {
        btnScrollTop.style.display = 'block';
      } else {
        btnScrollTop.style.display = 'none';
      }
    }, false);
    btnScrollTop.addEventListener('click', function () {
      scrolled = window.pageYOffset;
      scrollToTop();
    });

    function scrollToTop() {
      if (scrolled > 0) {
        window.scrollTo(0, scrolled);
        scrolled -= 100;
        timer = setTimeout(scrollToTop, 20);
      } else {
        clearTimeout(timer);
        window.scrollTo(0, 0);
      }
    }
  }
  /** */


  var contactsBlock = document.querySelector('#contact');
  var contactsBtn = document.querySelector('.btn-to-contacts');
  var coord = contactsBlock.getBoundingClientRect().top + pageYOffset;
  contactsBtn.addEventListener('click', function () {
    window.scrollTo(0, coord);
  });
  /**
   * Header sticky
   */

  function headerStickyInit() {
    var header = document.querySelector('.header');
    window.addEventListener('scroll', function () {
      window.pageYOffset > 30 ? header.classList.add('header--sticky') : header.classList.remove('header--sticky');
    }, false);
  }
  /**
   * Reviews section slider
   * Swiper slider
   */


  var mySwiper = new Swiper('.swiper-container', {
    pagination: {
      el: '.swiper-pagination'
    }
  });
})();
//# sourceMappingURL=main.min.js.map
